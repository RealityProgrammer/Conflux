<div @attributes="AdditionalAttributes">
    <CascadingValue Value="this">
        <ul class="@ButtonContainerCssClass">
            @Buttons(ActiveId)
        </ul>
        
        <div class="@ContentContainerCssClass">
            @Contents(ActiveId)
        </div>
    </CascadingValue>
</div>

@code {
    [Parameter, EditorRequired] public required RenderFragment<string?> Buttons { get; set; }
    [Parameter, EditorRequired] public required RenderFragment<string?> Contents { get; set; }
    [Parameter] public string? ButtonContainerCssClass { get; set; }
    [Parameter] public string? ContentContainerCssClass { get; set; }
    [Parameter] public string? InitiallyActiveId { get; set; }
    [Parameter] public EventCallback<string> OnActiveTabChanged { get; set; }
    
    public string? ActiveId { get; private set; }
    
    [Parameter(CaptureUnmatchedValues = true)] public IReadOnlyDictionary<string, object>? AdditionalAttributes { get; set; }

    protected override void OnParametersSet() {
        ActiveId = InitiallyActiveId;
    }

    public async Task SetActiveId(string id) {
        if (ActiveId == id) return;
        
        ActiveId = id;
        await OnActiveTabChanged.InvokeAsync(id);

        StateHasChanged();
    }
}