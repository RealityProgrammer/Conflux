@using System.Linq.Expressions

<Dialog @bind-Open="Open" OnClickOutside="OnClickOutside" @attributes="AdditionalAttributes">
    <div class="fixed h-full @GetDirectionalCssClass() z-10 pointer-events-auto @ContainerCssClass">
        @ChildContent
    </div>
</Dialog>

@code {
    [Parameter] public bool Open { get; set; }
    [Parameter] public EventCallback<bool> OpenChanged { get; set; }
    [Parameter] public Expression<Func<bool>>? OpenExpression { get; set; }

    [Parameter] public DrawerAnchorDirection Direction { get; set; }
    
    [Parameter] public EventCallback<MouseEventArgs> OnClickOutside { get; set; }
    
    [Parameter] public string? ContainerCssClass { get; set; }
    
    [Parameter, EditorRequired] public required RenderFragment ChildContent { get; set; }
    
    [Parameter(CaptureUnmatchedValues = true)] public IReadOnlyDictionary<string, object>? AdditionalAttributes { get; set; }

    private string GetDirectionalCssClass() {
        switch (Direction) {
            case DrawerAnchorDirection.Right:
                return $"right-0 {(Open ? "translate-x-0" : "translate-x-full")}";
                
            case DrawerAnchorDirection.Left:
            default:
                return $"left-0 {(Open ? "translate-x-0" : "-translate-x-full")}";
        }
    }
}